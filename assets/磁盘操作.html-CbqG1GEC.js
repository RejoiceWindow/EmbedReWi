import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as n,o as l}from"./app-DIMvcjhy.js";const h="/assets/Linux001-DdvvuHqx.png",t="/assets/Linux002-D3Psehnz.png",e="/assets/Linux003-Dym1Wabo.png",k="/assets/Linux004-DchGq8j4.png",p="/assets/Linux005-CbW3a_F0.png",r="/assets/Linux006-78h2RN3p.png",d="/assets/Linux007-7QgipArR.png",g="/assets/Linux008-BM_vufXb.png",c="/assets/Linux009-BAgZJrce.png",F="/assets/Linux010-Ddh9za5o.png",y={};function A(o,s){return l(),a("div",null,s[0]||(s[0]=[n(`<h2 id="一、linux-制作分区img文件-官方系统镜像扩容" tabindex="-1"><a class="header-anchor" href="#一、linux-制作分区img文件-官方系统镜像扩容"><span>一、linux 制作分区img文件+官方系统镜像扩容</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>可在Linux虚拟机操作，不使用共享文件夹速度快很多<br> 共享文件夹参考：共享文件夹<br> sudo mount -t cifs -o username=rewi,password= <a href="//10.162.130.10/share" target="_blank" rel="noopener noreferrer">//10.162.130.10/share</a> ~/share</p></div><p><a href="https://blog.csdn.net/leacock1991/article/details/113575966" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/leacock1991/article/details/113575966</a><br><a href="https://blog.csdn.net/talkxin/article/details/50456282" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/talkxin/article/details/50456282</a></p><div class="hint-container info"><p class="hint-container-title">相关信息</p><p><a href="https://cloud.tencent.com/developer/article/1175328" target="_blank" rel="noopener noreferrer">https://cloud.tencent.com/developer/article/1175328</a><br> 不要用fdsik处理gpt分区，也不要用gdisk处理mbr分区</p></div><h3 id="_1-查看官方镜像分区情况" tabindex="-1"><a class="header-anchor" href="#_1-查看官方镜像分区情况"><span>1. 查看官方镜像分区情况</span></a></h3><p>需要在官网下载一个烧录用的镜像文件，如：重命名后的radxa-cm3-io-ubuntu-server-gpt.img</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看 img 文件情况</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fdisk</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> radxa-cm3-io-ubuntu-server-gpt.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> parted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> radxa-cm3-io-ubuntu-server-gpt.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> print</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+h+`" alt="Linux001" tabindex="0" loading="lazy"><figcaption>Linux001</figcaption></figure><h3 id="_2-一般官方镜像空间较小-需要扩容" tabindex="-1"><a class="header-anchor" href="#_2-一般官方镜像空间较小-需要扩容"><span>2. 一般官方镜像空间较小，需要扩容</span></a></h3><h4 id="_2-1-拷贝或者直接重命名-一份官方镜像" tabindex="-1"><a class="header-anchor" href="#_2-1-拷贝或者直接重命名-一份官方镜像"><span>2.1 拷贝或者直接重命名 一份官方镜像</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 将 rsync 换成 cp 也可 </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rsync</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -vauP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> radxa-cm3-io-ubuntu-server-gpt.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rk3566-cm3Ubuntu.img</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>命令 加上<code>time</code> 可查看时间<br><img src="`+t+'" alt="Linux002" loading="lazy"></p><h4 id="_2-2-在核心板-查看待备份系统的磁盘使用" tabindex="-1"><a class="header-anchor" href="#_2-2-在核心板-查看待备份系统的磁盘使用"><span>2.2 在核心板，查看待备份系统的磁盘使用</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">df</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+e+`" alt="Linux003" tabindex="0" loading="lazy"><figcaption>Linux003</figcaption></figure><h4 id="_2-3-新镜像增加大小" tabindex="-1"><a class="header-anchor" href="#_2-3-新镜像增加大小"><span>2.3 新镜像增加大小</span></a></h4><p><a href="https://blog.csdn.net/wxwpxh/article/details/50532586" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/wxwpxh/article/details/50532586</a><br><a href="https://wiki.radxa.com/Rock3/dev/Debian" target="_blank" rel="noopener noreferrer">https://wiki.radxa.com/Rock3/dev/Debian</a><br><a href="https://www.cnblogs.com/machangwei-8/p/10353628.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/machangwei-8/p/10353628.html</a><br><a href="https://mlog.club/article/3546393" target="_blank" rel="noopener noreferrer">https://mlog.club/article/3546393</a><br><a href="https://blog.csdn.net/zhanghaiyang9999/article/details/82952112" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/zhanghaiyang9999/article/details/82952112</a></p><p>要比使用情况大一点，如：比5G大1G ~ 6G</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 快速创建镜像 如：6G --&gt; 文件系统空间未检测真实大小？？</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># sudo dd if=/dev/zero of=rk3566-cm3Ubuntu.img seek=6G bs=1 count=1</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 就是在文件后面追加 5G 大小 --&gt; 现在大小 = 原大小+5G</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> if=/dev/zero</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of=rk3566-cm3Ubuntu.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bs=1MiB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> conv=notrunc</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> oflag=append</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> count=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5120</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+k+'" alt="Linux004" tabindex="0" loading="lazy"><figcaption>Linux004</figcaption></figure><figure><img src="'+p+`" alt="Linux005" tabindex="0" loading="lazy"><figcaption>Linux005</figcaption></figure><h4 id="_2-4-给新镜像文件系统分区增加空间" tabindex="-1"><a class="header-anchor" href="#_2-4-给新镜像文件系统分区增加空间"><span>2.4 给新镜像文件系统分区增加空间</span></a></h4><ul><li>修正分区表信息<br><a href="https://mlog.club/article/2581532" target="_blank" rel="noopener noreferrer">https://mlog.club/article/2581532</a><br><a href="https://mlog.club/article/2824620" target="_blank" rel="noopener noreferrer">https://mlog.club/article/2824620</a></li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># sudo sfdisk -d rk3566-cm3Ubuntu.img &gt; PT_img.txt</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gdisk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rk3566-cm3Ubuntu.img</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># sudo sfdisk -d rk3566-cm3Ubuntu.img &gt; PT_img.txt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gdisk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rk3566-cm3Ubuntu.img</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># output Text</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rewi@rewi-ubuntu:~/share$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gdisk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rk3566-cm3Ubuntu.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GPT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fdisk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (gdisk) version 1.0.3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Warning!</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Problem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> closing</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file!</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Partition</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> scan:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  MBR:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> protective</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  BSD:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> present</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  APM:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> present</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  GPT:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> present</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Found</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> valid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GPT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> with</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> protective</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> MBR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">using</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GPT.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (? </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> help</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">): p</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rk3566-cm3Ubuntu.img:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 14392010</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sectors,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6.9</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GiB</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Sector</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (logical): 512 bytes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> identifier</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (GUID): 9AF3DD72-EBB1-4852-99EE-854B425B8432</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Partition</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> holds</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> up</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 128</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> entries</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Main</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> partition</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> begins</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sector</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ends</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sector</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 33</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">First</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> usable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sector</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 34,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> last</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> usable</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sector</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3906216</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Partitions</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> will</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> aligned</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 2048-sector</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> boundaries</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Total</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> free</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> space</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 32734</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sectors</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (16.0 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MiB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Number</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (sector)    End (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)  Size       Code  Name</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">           32768</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         1081343</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   512.0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> MiB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   EF00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  boot</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         1081344</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         3906216</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   1.3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GiB</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     8300</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  rootfs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (? </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> help</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">): v</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Problem:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> The</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> secondary</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> header&#39;s self-pointer indicates that it doesn&#39;t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reside</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> end</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disk.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> If</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> you&#39;ve added a disk to a RAID array, use the &#39;e&#39;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">option on the experts&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> menu</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> adjust</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> secondary</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> header&#39;s and partition</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">table&#39;s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> locations.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Identified</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> problems!</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (? </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> help</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">): w</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Warning!</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Secondary</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> header</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> placed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> too</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> early</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disk!</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Do</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> want</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">correct</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> this</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> problem?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (Y/N): Y</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Have</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> moved</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> second</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> header</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> partition</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> correct</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> location.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Final</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> checks</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> complete.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> About</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> write</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GPT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> data.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> THIS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> WILL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> OVERWRITE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> EXISTING</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">PARTITIONS!!</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Do</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> want</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> proceed?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (Y/N): Y</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">OK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">writing</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> new</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GUID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> partition</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (GPT) to rk3566-cm3Ubuntu.img.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Warning:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> The</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> still</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> using</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> old</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> partition</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">The</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> new</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> will</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> used</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> at</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> next</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> after</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> you</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> partprobe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kpartx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">The</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> operation</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> has</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> completed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> successfully.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rewi@rewi-ubuntu:~/share$</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://blog.csdn.net/s1429583654/article/details/127407015" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/s1429583654/article/details/127407015</a></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 刷新分区表</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> partprobe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rk3566-cm3Ubuntu.img</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+r+'" alt="Linux006" tabindex="0" loading="lazy"><figcaption>Linux006</figcaption></figure><ul><li>将剩余空间给分区2<br><a href="https://blog.csdn.net/qq_45443704/article/details/122136074" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_45443704/article/details/122136074</a><br> ❌最终大小，-1 表示磁盘大小迁移1MB（也就是磁盘大小-1MB）<br> ✔️留出1G未分配空间</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> parted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rk3566-cm3Ubuntu.img</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+d+`" alt="Linux007" tabindex="0" loading="lazy"><figcaption>Linux007</figcaption></figure><h4 id="_2-5-查看新镜像分区情况" tabindex="-1"><a class="header-anchor" href="#_2-5-查看新镜像分区情况"><span>2.5 查看新镜像分区情况</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> parted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rk3566-cm3Ubuntu.img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> print</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># sudo fdisk -l rk3566-cm3Ubuntu.img</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+g+`" alt="Linux008" tabindex="0" loading="lazy"><figcaption>Linux008</figcaption></figure><h3 id="_3-重要-文件系统大小调整" tabindex="-1"><a class="header-anchor" href="#_3-重要-文件系统大小调整"><span>3.（重要）文件系统大小调整</span></a></h3><h4 id="_3-1-将分区和-loop设备建立联系" tabindex="-1"><a class="header-anchor" href="#_3-1-将分区和-loop设备建立联系"><span>3.1 将分区和 loop设备建立联系</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># dosfstools：fat32分区格式化工具</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># dump：dump &amp; restore 备份工具</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># parted &amp; kpartx：虚拟磁盘工具</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dosfstools</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dump</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> parted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kpartx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">loopdevice</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> losetup </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-f</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --show</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rk3566-cm3Ubuntu.img\`</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">device</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kpartx </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-va</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $loopdevice</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -E</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;s/.*(loop[0-9])p.*/\\1/g&#39; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> head</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">device</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/dev/mapper/</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">\${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">device</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">partBoot</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">\${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">device</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">p1&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">partRoot</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">\${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">device</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">p2&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> losetup</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># lsblk</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+c+'" alt="Linux009" loading="lazy"><br><img src="'+F+`" alt="Linux010" loading="lazy"></p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">####3.2 挂载分区</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">https://blog.csdn.net/Zhang_Pro/article/details/128517982</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 选择一个目录</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/share</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 建立挂载点</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rootfs</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 挂载</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop30p2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rootfs/</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">![Linux011](</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./images/Linux011.png</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`\`\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3.3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 查看挂载情况</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`\`\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bash</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">![Linux012](</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./images/Linux012.png</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">####3.4 发现容量异常，解决办法</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`\`\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">https://blog.csdn.net/Linux_kiss/article/details/120859937</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">https://www.cnblogs.com/hgzero/p/14193427.html</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">https://blog.csdn.net/wj78080458/article/details/83851147</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> resize2fs </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop30p2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">df</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Th</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">!</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[Linux013](</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./images/Linux013.png</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">!</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">[Linux014](</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./images/Linux014.png</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">####3.5 卸载分区</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`\`\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bash</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 挂载点</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> umount</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/loop30p2</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 虚拟磁盘</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kpartx</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $loopdevice</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> losetup</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $loopdevice</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">![Linux015](</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./images/Linux015.png</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">二、使用新img文件备份系统</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">此部分在待备份的操作系统中操作，速度也很快</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 新增硬盘或直接备份</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">挂载一个保存镜像的磁盘（方便复制出来）:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> U盘或者使用PC共享文件夹：共享文件夹</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">如果核心板空间足够则不需要，备份好了通过网络传到电脑保存效果一样</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">在需要的位置创建文件夹，用于挂载镜像，如：share</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> share</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># sudo mount -t cifs -o username=rewi,password= //10.162.130.10/share ~/share</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~/share</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 将分区和</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> loop设备建立联系</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 方法一</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># parted &amp; kpartx：虚拟磁盘工具</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> parted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kpartx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">loopdevice</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> losetup </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-f</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --show</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rk3566-cm3Ubuntu.img\`</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">device</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kpartx </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">-va</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $loopdevice</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> sed</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -E</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;s/.*(loop[0-9])p.*/\\1/g&#39; </span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">|</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> head</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\`</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">device</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/dev/mapper/</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">\${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">device</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">partBoot</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">\${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">device</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">p1&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">partRoot</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">\${</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">device</span><span style="--shiki-light:#E45649;--shiki-dark:#98C379;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">p2&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> losetup</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># lsblk</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">![Linux016](</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./images/Linux016.png</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 方法二</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">···bash</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> （跳过）方法二</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 查看</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> img</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 文件情况</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fdisk</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rk3566-cm3Ubuntu.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">可知一共有两个区，以及各区相关信息。由于一共有两个区后面需要和两个loop设置建立联系。</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">注意记录下：</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 扇区大小</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 字节</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ，各分区起止扇区编号rk3566-cm3Ubuntu.img1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">32768</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  1081343</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  1048576</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">和rk3566-cm3Ubuntu.img2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1081344</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 12580959</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 11499616</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">![Linux017](</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./images/Linux017.png</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">这里需要进行一点计算</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">16777216</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 32768</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ；</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 536870912</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1048576</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 或</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> （1081343</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2048</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1）</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> （注意：</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +1）</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># -o （起始扇区 * 扇区大小）--sizelimit （扇区数量 * 扇区大小） 字节</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> losetup</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 16777216</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --sizelimit</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 536870912</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rk3566-cm3Ubuntu.img</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> losetup</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 553648128</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  rk3566-cm3Ubuntu.img</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看是否成功</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> losetup</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># lsblk</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">![Linux018](</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">./images/Linux018.png</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> （可能导致UUID不匹配，跳过）格式化分区</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 方法一</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#boot分区用fat32进行格式化</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># sudo mkfs.vfat $partBoot</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># sudo mkfs.ext4 $partRoot</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 方法二</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># sudo mkfs.fat /dev/loop5</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># sudo mkfs.ext4 /dev/loop32</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">-</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> （跳过）检查</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">https://www.cnblogs.com/pyng/p/11820112.html</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fsck.ext4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -a</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -C0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/loop1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,39)]))}const m=i(y,[["render",A]]),b=JSON.parse('{"path":"/OS/Linux/%E7%A3%81%E7%9B%98%E6%93%8D%E4%BD%9C.html","title":"磁盘操作","lang":"zh-CN","frontmatter":{"title":"磁盘操作","date":"2025-05-01T15:00:00.000Z","icon":"clarity:command-solid","tags":["Linux"],"categories":["OS"],"description":"一、linux 制作分区img文件+官方系统镜像扩容 提示 可在Linux虚拟机操作，不使用共享文件夹速度快很多 共享文件夹参考：共享文件夹 sudo mount -t cifs -o username=rewi,password= //10.162.130.10/share ~/share https://blog.csdn.net/leacock1...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"磁盘操作\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-05-01T15:00:00.000Z\\",\\"dateModified\\":\\"2025-05-01T10:09:22.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"ReWi\\",\\"url\\":\\"https://gitee.com/re-wi\\",\\"email\\":\\"RejoiceWindow@yeah.net\\"},{\\"@type\\":\\"Person\\",\\"name\\":\\"ReWi\\",\\"url\\":\\"https://github.com/Re-Wi/\\",\\"email\\":\\"RejoiceWindow@yeah.net\\"},{\\"@type\\":\\"Person\\",\\"name\\":\\"RejoiceWindow\\"}]}"],["meta",{"property":"og:url","content":"https://em.rewi.xyz/OS/Linux/%E7%A3%81%E7%9B%98%E6%93%8D%E4%BD%9C.html"}],["meta",{"property":"og:site_name","content":"EmbedReWi"}],["meta",{"property":"og:title","content":"磁盘操作"}],["meta",{"property":"og:description","content":"一、linux 制作分区img文件+官方系统镜像扩容 提示 可在Linux虚拟机操作，不使用共享文件夹速度快很多 共享文件夹参考：共享文件夹 sudo mount -t cifs -o username=rewi,password= //10.162.130.10/share ~/share https://blog.csdn.net/leacock1..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-01T10:09:22.000Z"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:published_time","content":"2025-05-01T15:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-01T10:09:22.000Z"}],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://em.rewi.xyz/rss.xml","title":"EmbedReWi RSS Feed"}]]},"git":{"createdTime":1746088422000,"updatedTime":1746094162000,"contributors":[{"name":"ReWi","username":"","email":"RejoiceWindow@yeah.net","commits":2}]},"readingTime":{"minutes":4.68,"words":1404},"filePathRelative":"OS/Linux/磁盘操作.md","localizedDate":"2025年5月1日","excerpt":"<h2>一、linux 制作分区img文件+官方系统镜像扩容</h2>\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>可在Linux虚拟机操作，不使用共享文件夹速度快很多<br>\\n共享文件夹参考：共享文件夹<br>\\nsudo mount -t cifs -o username=rewi,password= <a href=\\"//10.162.130.10/share\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">//10.162.130.10/share</a> ~/share</p>\\n</div>","autoDesc":true}');export{m as comp,b as data};
