import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as o,d as a,o as r}from"./app-DIMvcjhy.js";const n="/assets/structure-CR7mpwE5.png",i="/assets/PullUpDown-B2d5iNK2.png",s={};function p(l,e){return r(),o("div",null,e[0]||(e[0]=[a('<p>所有12C设备的SCL连在一起,SDA连在一起<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup></p><p>IIC总线上所有器件的SDA、SCL引脚输出驱动都为 开漏(OD) 结构，通过外接上拉电阻实现总线上所有节点SDA、SCL信号的线与逻辑关系；<sup class="footnote-ref"><a href="#footnote2">[2]</a><a class="footnote-anchor" id="footnote-ref2"></a></sup><br> 总线上的所有设备通过软件寻址且具有唯一的地址（7位或10位）。7位“从机专用地址码”，其高4位为由生产厂家制定的设备类型地址，低3位为器件引脚定义地址（由使用者定义）；10位地址不常见；<br> IIC总线允许挂载最多的设备数量取决于总线上最大电容值，一般为400pf（Hs模式100pf）</p><h2 id="所有设备的sda和scl分别接在一起-并且两条线上各有一个上拉电阻作用" tabindex="-1"><a class="header-anchor" href="#所有设备的sda和scl分别接在一起-并且两条线上各有一个上拉电阻作用"><span>所有设备的SDA和SCL分别接在一起，并且两条线上各有一个上拉电阻作用</span></a></h2><p>SCL和SDA各添加一个上拉电阻,阻值一般为4.7KΩ左右</p><p>我们先讨论在没有上拉电阻的情况下会发生什么。<br> 主机绝对掌控SCL，所以SCL输出可以配置推挽输出，从机的SCL配置成浮空输入或上拉输入，那就没问题；但是在SDA上就不一样了，如果没控制好时序，极有可能发生两个引脚都输出，主机SDA输出高电平，从机SDA输出低电平，会造成直接短路，所以要避免这种情况发生。</p><p>于是IIC禁止所有设备输出强上拉的高电平，采用开漏输出加外置弱上拉电阻的电路结构。开漏输出中，当输出低电平时，下管导通实现强下拉，输出高电平时，下管断开且没有上管，于是呈现浮空状态。这样所有设备只能输出低电平而不能输出高电平。</p><p>为了避免低电平造成的引脚浮空，就需要在SCL和SDA总线各外置一个上拉电阻。这样的设计有3个好处：</p><ol><li>总线不会同时有高电平和低电平的输出状态</li><li>避免了引脚模式的频繁切换<br> 开漏加弱上拉模式同时兼具输入和输出模式。当设备需要输出时，可以通过是否输出低电平使得总线电平变化；当引脚需要输入时，可以输出高电平，相当于断开引脚，观察总线电平变化。所以输入之前可以输出高电平，不需要切换输入模式</li><li>实现“线与”<br> 只要有一个设备输出低电平，这个总线就是低电平，只有所有设备输出高电平（因为高电平相当于都断开引脚，上拉电阻将总线电平拉高），总线才处于高电平</li></ol><h2 id="总线结构" tabindex="-1"><a class="header-anchor" href="#总线结构"><span>总线结构</span></a></h2><p>IIC使用两根信号线进行通信，要求两根线都使用 开漏输出接上拉电阻 的配置，以此实现总线上所有节点SDA、SCL信号的 线与 逻辑关系。<br> R<sub>p</sub> 电阻的取值有一定的要求，太小会导致灌入电流过大，使’低’数据不稳定，甚至损坏端口；太大会导致信号上升缓慢，使得数据传输出错。在不同应用场景及供电电压下有不同的取值要求。</p><figure><img src="'+n+'" alt="结构" tabindex="0" loading="lazy"><figcaption>结构</figcaption></figure><p><strong>线与</strong> 逻辑使得总线上不会出现数据冲突，实现了总线的仲裁控制。总线的控制权会交给最后一个输出低电平的设备，其它设备（输出高）通过检测总线上的电平状态（状态低），对比与自己输出状态不一致，则自动退出对总线的控制请求，从而防止了总线上的数据冲突。<br>   漏极开路/集电极开路的缺点是对于一个距离长的数据线，信号传输速率得不到有效保证。更长的走线对于输出驱动器表现为更大的容性负载，等效容性负载C和信号线的上拉电阻R构成RC振荡器。RC越大，意味着反射和振荡越强，从而影响总线的信号完整性。这也是I2C规范对总线电容值约束在400pf以内的原因。高速模式对信号完整性的要求更高，协议有定义相关SDA/SCL处理办法，以保证在数据线够长、速率够高时，信号完整性也可以得到满足。</p><h2 id="总线的拉高和拉低" tabindex="-1"><a class="header-anchor" href="#总线的拉高和拉低"><span>总线的拉高和拉低</span></a></h2><p>下图展示了IIC总线拉低和拉高的过程。</p><ul><li>拉低：设备的逻辑电路控制FET打开，总线通过导通的FET连接到GND从而被拉低</li><li>拉高：设备的逻辑电路控制FET关闭，总线通过上拉电阻Rp连接到VDD从而被拉高</li></ul><figure><img src="'+i+'" alt="拉高拉低" tabindex="0" loading="lazy"><figcaption>拉高拉低</figcaption></figure><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="footnote1" class="footnote-item"><p><a href="https://blog.csdn.net/weixin_44115575/article/details/136713792" target="_blank" rel="noopener noreferrer">IIC通讯协议详解（电路和时序图）</a> <a href="#footnote-ref1" class="footnote-backref">↩︎</a></p></li><li id="footnote2" class="footnote-item"><p><a href="https://blog.csdn.net/qq_39829913/article/details/104718185" target="_blank" rel="noopener noreferrer">基础通信协议之 IIC (I2C) 详细讲解</a> <a href="#footnote-ref2" class="footnote-backref">↩︎</a></p></li></ol></section>',19)]))}const d=t(s,[["render",p]]),h=JSON.parse('{"path":"/hardware/IIC%E6%8E%A5%E5%8F%A3.html","title":"IIC接口","lang":"zh-CN","frontmatter":{"lang":"zh-CN","title":"IIC接口","description":"IIC硬件接口","icon":"lucide:circuit-board","tag":["interface","IIC"],"category":["hardware"],"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"IIC接口\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-04-29T07:17:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"ReWi\\",\\"url\\":\\"https://gitee.com/re-wi\\",\\"email\\":\\"RejoiceWindow@yeah.net\\"},{\\"@type\\":\\"Person\\",\\"name\\":\\"ReWi\\",\\"url\\":\\"https://github.com/Re-Wi/\\",\\"email\\":\\"RejoiceWindow@yeah.net\\"},{\\"@type\\":\\"Person\\",\\"name\\":\\"RejoiceWindow\\"}]}"],["meta",{"property":"og:url","content":"https://em.rewi.xyz/hardware/IIC%E6%8E%A5%E5%8F%A3.html"}],["meta",{"property":"og:site_name","content":"EmbedReWi"}],["meta",{"property":"og:title","content":"IIC接口"}],["meta",{"property":"og:description","content":"IIC硬件接口"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-04-29T07:17:06.000Z"}],["meta",{"property":"article:tag","content":"IIC"}],["meta",{"property":"article:tag","content":"interface"}],["meta",{"property":"article:modified_time","content":"2025-04-29T07:17:06.000Z"}],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://em.rewi.xyz/rss.xml","title":"EmbedReWi RSS Feed"}]]},"git":{"createdTime":1744711098000,"updatedTime":1745911026000,"contributors":[{"name":"ReWi","username":"","email":"RejoiceWindow@yeah.net","commits":2}]},"readingTime":{"minutes":4.27,"words":1282},"filePathRelative":"hardware/IIC接口.md","localizedDate":"2025年4月15日","excerpt":"<p>所有12C设备的SCL连在一起,SDA连在一起<sup class=\\"footnote-ref\\"><a href=\\"#footnote1\\">[1]</a><a class=\\"footnote-anchor\\" id=\\"footnote-ref1\\"></a></sup></p>\\n<p>IIC总线上所有器件的SDA、SCL引脚输出驱动都为 开漏(OD) 结构，通过外接上拉电阻实现总线上所有节点SDA、SCL信号的线与逻辑关系；<sup class=\\"footnote-ref\\"><a href=\\"#footnote2\\">[2]</a><a class=\\"footnote-anchor\\" id=\\"footnote-ref2\\"></a></sup><br>\\n总线上的所有设备通过软件寻址且具有唯一的地址（7位或10位）。7位“从机专用地址码”，其高4位为由生产厂家制定的设备类型地址，低3位为器件引脚定义地址（由使用者定义）；10位地址不常见；<br>\\nIIC总线允许挂载最多的设备数量取决于总线上最大电容值，一般为400pf（Hs模式100pf）</p>"}');export{d as comp,h as data};
